---
description: 对症状进行深度鉴别诊断分析
arguments:
  - name: symptom
    description: 症状描述（自然语言描述症状，包括部位、性质、持续时间等）
    required: true
  - name: duration
    description: 症状持续时间（例如：3天、1周、2小时等）
    required: false
  - name: severity
    description: 严重程度（mild/moderate/severe，或用自然语言描述）
    required: false
---

# 症状分析展开思考

对症状进行结构化鉴别诊断分析，整合多维度健康数据，生成思维导图和决策流程，帮助您深入理解症状背后的可能原因。

## 使用方法

### 基本用法

```
/think-symptom 头痛
/think-symptom 头痛，持续3天，双侧胀痛
/think-symptom 胸闷气短，持续2小时
/think-symptom 发热38度，伴有咳嗽
/think-symptom 腹痛，右下腹痛，持续1天
```

### 详细描述

您可以提供更详细的症状描述，包括：

- **部位**：双侧、单侧、前额、枕部、上腹部等
- **性质**：胀痛、搏动性、刺痛、烧灼感等
- **持续时间**：3天、1周、2小时等
- **严重程度**：轻微、中等、严重、剧烈等
- **伴随症状**：恶心、呕吐、发热等
- **诱发因素**：活动后、情绪紧张、饮食等
- **缓解因素**：休息、服药、体位改变等

示例：
```
/think-symptom 头痛，双侧胀痛，持续3天，早晨明显，伴有轻微恶心
/think-symptom 胸痛，胸骨后压迫感，活动后加重，休息后缓解
/think-symptom 腹痛，转移性右下腹痛，伴有恶心呕吐和发热
```

## 执行流程

症状分析展开思考将执行以下步骤：

### 1. 症状特征提取

系统会自动从您的描述中提取以下信息：

- **症状名称**：识别主症状（如头痛、胸痛等）
- **部位特征**：症状发生的具体位置
- **性质特征**：疼痛或不适的感觉类型
- **时间特征**：持续时间和发作模式
- **严重程度**：轻度、中度或重度

### 2. 数据整合

系统会读取您的健康数据，包括：

- 基础档案（年龄、性别等）
- 慢性病史（高血压、糖尿病等）
- 生命体征趋势（血压、血糖等）
- 症状历史（是否反复出现）
- 用药记录（当前用药情况）
- 筛查记录（相关检查结果）

### 3. 鉴别诊断生成

基于症状特征和您的健康数据，系统会：

- 从知识库中匹配可能的诊断
- 评估每个诊断的可能性
- 识别支持和反对证据
- 考虑年龄、性别等个体因素
- 按可能性和风险排序

### 4. 危险信号识别

系统会自动识别危险信号，包括：

- 症状特征中的危险信号（如突然剧烈头痛）
- 知识库中的警示症状
- 高风险诊断的提示

### 5. 建议生成

基于分析结果，系统会提供：

- **紧急程度评估**：立即就医、尽快就医或居家观察
- **建议检查**：需要做哪些检查进一步明确诊断
- **自我护理**：居家期间可以做什么
- **就医建议**：就诊时应该告诉医生什么

### 6. 可视化输出

系统会生成以下可视化内容：

- **思维导图**：展示症状特点、鉴别诊断、危险信号的结构化关系
- **决策流程图**：展示根据症状应采取的行动路径
- **HTML详细报告**：保存为可在浏览器中打开的交互式报告

## 输出内容

症状分析展开思考会生成以下内容：

### 分析摘要

简要概述：
- 主要症状
- 最可能的诊断及可能性
- 需要排除的其他诊断

### 症状特征分析

结构化展示症状的各个维度：
- 部位
- 性质
- 时间
- 严重程度

### 鉴别诊断列表

按可能性和风险排序的3-5个诊断，每个诊断包括：

- **诊断名称**：标准医学诊断名称
- **可能性**：基于您的症状和数据评估的概率
- **风险等级**：该诊断的严重程度（低、中、高、极高）
- **支持点**：您的症状中支持该诊断的证据
- **反对点**：您的症状中不支持该诊断的证据
- **典型年龄**：该诊断通常发生的年龄段
- **性别倾向**：该诊断在不同性别中的分布

### 危险信号警示

如果识别出危险信号，会特别提示：

- 红色警示信号列表
- 需要立即就医的情况
- 症状加重的预警

### 建议

分为以下几类：

#### 就医建议

根据紧急程度给出建议：
- **立即就医**：检测到危险信号或高风险诊断
- **尽快就医**：中度风险，建议1-2天内就诊
- **居家观察**：低风险，可观察，如症状加重或持续超过1周再就医

#### 建议检查

列出可能需要做的检查项目：
- 体格检查（如血压测量）
- 实验室检查（如血常规）
- 影像学检查（如心电图、超声）
- 专科检查（如神经系统检查）

#### 自我护理

居家期间的自我护理建议：
- 充分休息
- 记录症状日记
- 观察症状变化
- 生活方式调整

### 思维导图

使用Mermaid格式生成的结构化思维导图，展示：

- 症状特点分支（部位、性质、时间等）
- 鉴别诊断分支（各诊断及可能性）
- 危险信号分支（如有）

### 决策流程图

使用Mermaid格式生成的决策流程图，展示：

- 根据症状和风险等级应采取的行动
- 何时就医
- 何时可以观察
- 需要做哪些检查

### HTML详细报告

保存为HTML文件的详细分析报告，包括：

- 所有分析内容
- 交互式思维导图和流程图
- 美观的界面设计
- 可以在浏览器中打开查看
- 可以打印或分享给医生

### 关键问题

就医时可以询问医生的关键问题，帮助您更好地了解自己的状况。

## 示例输出

### 输入：
```
/think-symptom 头痛，持续3天，双侧胀痛
```

### 输出示例：

```
🔍 症状分析报告：头痛

分析摘要：
━━━━━━━━━━━━━━━━━━━━━━━━━━
主要症状：头痛（双侧胀痛，持续3天）
最可能的诊断：紧张性头痛（可能性：65%）
需要排除的诊断：偏头痛（可能性：20%）、高血压相关头痛（可能性：10%）

症状特征分析：
━━━━━━━━━━━━━━━━━━━━━━━━━━
- 部位：双侧 ✓ 提示紧张性头痛
- 性质：胀痛 ✓ 提示紧张性头痛
- 持续时间：3天 ✓ 持续性特点
- 严重程度：中度

鉴别诊断排序：
━━━━━━━━━━━━━━━━━━━━━━━━━━
1. 紧张性头痛（可能性：65%）
   ✓ 支持点：双侧、胀痛、无先兆
   ✗ 反对点：无明显诱因
   风险等级：✅ 低

2. 偏头痛（可能性：20%）
   ✓ 支持点：伴有恶心
   ✗ 反对点：双侧非搏动性
   风险等级：✅ 低

3. 高血压相关头痛（可能性：10%）
   ✓ 支持点：有高血压病史
   ✗ 反对点：近期血压控制良好
   风险等级：⚠️ 中

建议：
━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 紧急程度：可居家观察

💡 就医建议：
如症状加重或持续超过1周，建议就医

🔬 建议检查：
- 血压测量
- 神经系统检查

🏠 自我护理：
- 充分休息
- 记录头痛日记
- 保证充足睡眠
- 减少压力

⚠️ 危险信号：
如出现以下情况请立即就医：
- 头痛突然加重
- 伴有发热、颈部僵硬
- 出现神经系统症状（无力、麻木）
- 视力改变或意识改变

📊 思维导图：
[思维导图链接]

📊 决策流程：
[决策流程图链接]

💾 详细报告：
data/thinking-analysis/symptom-analyses/2025-01/2025-01-05_头痛分析.html
```

## 支持的症状

当前版本支持以下常见症状的展开思考分析：

- **头痛** - 偏头痛、紧张性头痛、丛集性头痛等
- **胸痛** - 心绞痛、心肌梗死、肺栓塞等
- **腹痛** - 阑尾炎、胆结石、胃溃疡等
- **发热** - 感染、结核、肿瘤等
- **咳嗽** - 支气管炎、哮喘、肺炎等
- **呼吸困难** - 哮喘、慢阻肺、心衰等
- **心悸** - 期前收缩、心动过速、房颤等
- **水肿** - 心衰、肾病、静脉功能不全等
- **恶心呕吐** - 胃肠炎、妊娠、颅内压增高等
- **腹泻** - 感染性腹泻、肠易激综合征、炎症性肠病等
- **便秘** - 功能性便秘、肠梗阻、甲状腺功能减退等
- **头晕** - 良性阵发性位置性眩晕、前庭神经炎、直立性低血压等
- **乏力** - 贫血、甲减、抑郁、慢性疲劳综合征等
- **尿频尿急** - 尿路感染、膀胱过度活动症、前列腺增生等
- **关节痛** - 骨关节炎、类风湿关节炎、痛风等

## 注意事项

### ⚠️ 重要提示

1. **仅供参考**：本系统提供的分析仅供参考，不能替代专业医疗诊断
2. **紧急情况**：如遇紧急情况（如胸痛伴呼吸困难、剧烈头痛等），请立即就医或拨打120，不要仅依赖本系统
3. **专业诊断**：所有医疗决策应由专业医生根据具体情况做出
4. **数据隐私**：所有数据仅保存在本地，注意保护个人隐私
5. **持续更新**：医学知识不断更新，本系统也会定期更新知识库

### ✅ 适用场景

- 症状轻微，想了解可能的原因
- 准备就医前，希望了解可能的情况
- 症状反复出现，想深入理解
- 健康管理，想学习医学知识

### ❌ 不适用场景

- 紧急医疗情况
- 危急重症
- 需要立即专业医疗干预
- 儿童症状（儿童医学有特殊性）
- 孕期症状（需要妇产科专科评估）

## 数据存储

分析结果会保存到以下位置：

```
data/thinking-analysis/symptom-analyses/YYYY-MM/YYYY-MM-DD_症状分析.json
data/thinking-analysis/symptom-analyses/YYYY-MM/YYYY-MM-DD_症状分析.html
```

- JSON文件：包含结构化的分析数据，便于程序读取
- HTML文件：包含格式化的可视化报告，便于人工查看

## 技术实现

症状分析展开思考基于以下技术：

1. **医学知识库**：包含50+常见症状的鉴别诊断信息
2. **推理引擎**：基于贝叶斯推理的鉴别诊断算法
3. **数据聚合**：整合多维度健康数据
4. **可视化工具**：使用Mermaid.js生成思维导图和流程图
5. **报告生成器**：生成交互式HTML报告

## 常见问题

### Q: 分析结果准确吗？

A: 分析结果基于循证医学知识和算法，但仅供参考。实际诊断需要专业医生结合体格检查、实验室检查等综合判断。

### Q: 我应该完全依赖这个分析吗？

A: 不应该。本系统旨在帮助您更好地理解症状，但不能替代专业医疗建议。如有疑虑，请及时就医。

### Q: 我的症状在支持列表中没有怎么办？

A: 当前版本支持15个最常见症状。如果您的症状不在列表中，系统会尽力分析，但准确性可能降低。建议咨询医生。

### Q: 分析报告可以给医生看吗？

A: 可以。HTML报告可以打印或分享给医生，作为就诊时的参考。但请注意，这只是辅助工具，不能替代医生的诊断。

### Q: 我的健康数据会被上传到云端吗？

A: 不会。所有数据仅保存在您的本地设备，完全由您控制。

## 相关命令

- `/symptom add` - 记录症状
- `/symptom history` - 查看症状历史
- `/quality status` - 查看慢性病质量状态
- `/vitals history` - 查看生命体征历史
- `/consult` - 多学科专家会诊
